plugins {
    id 'com.android.library'
}

version          = version_number
group            = group_info

repositories {
    google()
    mavenCentral()
    mavenLocal()
    maven { url = uri('https://jitpack.io') }
}

android {
    namespace = 'org.whispersystems.libpastelog'
    compileSdk = 34

    defaultConfig {
        minSdkVersion = 21
        targetSdkVersion = 34
    }

    compileOptions {
        sourceCompatibility JavaVersion.VERSION_11
        targetCompatibility JavaVersion.VERSION_11
    }

    sourceSets {
        main {
            manifest.srcFile 'AndroidManifest.xml'
            resources.srcDirs = ['src']
            res.srcDirs = ['res']
            java.srcDirs = ['src']
        }
    }
}

dependencies {
    implementation 'androidx.core:core:1.13.1'
    implementation 'androidx.fragment:fragment:1.7.1'
    implementation 'com.squareup.okhttp3:okhttp:4.12.0'
}

tasks.whenTaskAdded { task ->
    if (task.name.equals("lint")) {
        task.enabled = false
    }
}

def isReleaseBuild() {
    return version.contains("SNAPSHOT") == false
}

def getReleaseRepositoryUrl() {
    return hasProperty('sonatypeRepo') ? sonatypeRepo
            : "https://oss.sonatype.org/service/local/staging/deploy/maven2/"
}

def getRepositoryUsername() {
    return hasProperty('whisperSonatypeUsername') ? whisperSonatypeUsername : ""
}

def getRepositoryPassword() {
    return hasProperty('whisperSonatypePassword') ? whisperSonatypePassword : ""
}


// Legacy publishing configuration removed; use modern publishing if required.


//apply from: '../gradle-mvn-push.gradle'
//
//afterEvaluate { project ->
//    android.libraryVariants.all { variant ->
//        tasks.androidJavadocs.doFirst {
//            classpath += files(variant.javaCompile.classpath.files)
//        }
//    }
//}
